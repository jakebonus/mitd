$(function(){var a=$("#frm_report"),d=$("#dt_report");function c(j,h,g){var k="",f=new XMLHttpRequest();f.open("GET",j,true);f.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var n=JSON.parse(this.responseText);$(h).detach();for(i=0;i<n.length;i++){k+="<option value='"+n[i].yr+"'>"+n[i].yr+"</option>"}$(g).html(k);$(g).prop("disabled",false);var m=base_url+"report/ajax_get_report",l={current_yr:$("#tr_year").val()};e(m,l)}};f.send()}c(base_url+"report/ajax_get_report_year","#tr_year option","#tr_year");function e(g,f){b("Processing","Please wait..","info",999999);d.dataTable().fnClearTable();d.dataTable().fnDestroy();d.removeClass("hidden");var h=d.DataTable({ajax:{type:"GET",url:g,data:f,dataSrc:""},columns:[{data:"month"},{data:"TRANSFER"},{data:"BURIAL"},{data:"CREMATION"},{data:"EXHUMATION"},{data:"TOTAL"}],dom:'<"wrapper"Bfit>',bFilter:false,info:false,scrollY:400,scrollX:true,paging:false,scrollCollapse:true,buttons:[{text:"",extend:"excelHtml5",titleAttr:"Export Excel",className:"fa fa-download",customize:function(k){var j=k.xl.worksheets["sheet1.xml"];$('row c[r^="C"]',j).attr("s","2")}},{text:"",extend:"print",titleAttr:"Print",className:"fa fa-print",exportOptions:{columns:":visible"},},{text:"",titleAttr:"Refresh",className:"fa fa-refresh",action:function(m,l,j,k){load_data();h.ajax.reload()}}],fnInitComplete:function(j,k){$(".alert-info .glyphicon-remove").trigger("click")}})}$("body").delegate("#btn_cancel","click",function(){a.data("formValidation").resetForm();a[0].reset();$("#print-report, ._print").addClass("hidden")});$("body").delegate("#btn_search","click",function(){var g=base_url+"report/ajax_get_report",f={current_yr:$("#tr_year").val()};e(g,f)});function b(g,h,f){$(".form-group").removeClass("has-success");new PNotify({title:g,text:h,styling:"bootstrap3",type:f,delay:1500})}});